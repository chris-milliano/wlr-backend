webpackJsonp([1],{0:function(n,l,t){n.exports=t("cDNt")},cDNt:function(n,l,t){"use strict";function o(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),d._33(-1,null,["Waiting on GPS"]))],null,null)}function e(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),d._33(1,null,["VISITED: ",", ",""]))],null,function(n,l){n(l,1,0,l.context.$implicit.title,l.context.$implicit.visited)})}function u(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),d._33(1,null,["",""]))],null,function(n,l){n(l,1,0,l.context.$implicit.title)})}function r(n){return d._35(0,[(n()(),d._18(0,0,null,null,2,"h4",[],null,null,null,null,null)),(n()(),d._33(1,null,["",": ",",",""])),d._31(2,2)],null,function(n,l){n(l,1,0,d._34(l,1,0,n(l,2,0,d._29(l.parent.parent,0),l.context.$implicit.timestamp,"shortTime")),l.context.$implicit.coords.latitude,l.context.$implicit.coords.latitude)})}function i(n){return d._35(0,[(n()(),d._18(0,0,null,null,24,"div",[],null,null,null,null,null)),(n()(),d._33(-1,null,["\n\n\n    "])),(n()(),d._18(2,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),d._33(3,null,["GPS ","s  --\x3e  lat= ",",  long= ",""])),(n()(),d._33(-1,null,["\n\n\n    "])),(n()(),d._33(-1,null,["\n\n    "])),(n()(),d._12(16777216,null,null,1,null,e)),d._16(7,802816,null,0,x.i,[d._1,d.Y,d.z],{ngForOf:[0,"ngForOf"]},null),(n()(),d._33(-1,null,["\n\n\n    "])),(n()(),d._18(9,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),d._33(-1,null,["LOCAL STORAGE:"])),(n()(),d._33(-1,null,["\n    "])),(n()(),d._12(16777216,null,null,1,null,u)),d._16(13,802816,null,0,x.i,[d._1,d.Y,d.z],{ngForOf:[0,"ngForOf"]},null),(n()(),d._33(-1,null,["\n\n\n    "])),(n()(),d._18(15,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),d._33(-1,null,["\n    "])),(n()(),d._18(17,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),d._33(-1,null,["\n    "])),(n()(),d._18(19,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),d._33(-1,null,["LOCAL STORAGE TIME:"])),(n()(),d._33(-1,null,["\n    "])),(n()(),d._12(16777216,null,null,1,null,r)),d._16(23,802816,null,0,x.i,[d._1,d.Y,d.z],{ngForOf:[0,"ngForOf"]},null),(n()(),d._33(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,7,0,t.visitedMarkers),n(l,13,0,t.markerInLocalStorage),n(l,23,0,t.timedPositions)},function(n,l){var t=l.component;n(l,3,0,t.userGPS.timestamp,t.userGPS.coords.latitude,t.userGPS.coords.longitude)})}function c(n){return d._35(0,[d._30(0,x.d,[d.B]),(n()(),d._12(16777216,null,null,1,null,o)),d._16(2,16384,null,0,x.j,[d._1,d.Y],{ngIf:[0,"ngIf"]},null),(n()(),d._33(-1,null,["\n"])),(n()(),d._12(16777216,null,null,1,null,i)),d._16(5,16384,null,0,x.j,[d._1,d.Y],{ngIf:[0,"ngIf"]},null),(n()(),d._33(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,2,0,!t.userGPS.coords),n(l,5,0,t.userGPS.coords)},null)}function s(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"app-gps",[],null,null,null,c,I)),d._16(1,245760,null,0,S,[P],null,null)],function(n,l){n(l,1,0)},null)}function a(n){return d._35(0,[(n()(),d._18(0,0,null,null,4,"div",[["class","container"],["id","home-container"]],null,null,null,null,null)),(n()(),d._33(-1,null,["\n    "])),(n()(),d._18(2,0,null,null,1,"div",[["class","button"]],null,[[null,"click"]],function(n,l,t){var o=!0,e=n.component;if("click"===l){o=!1!==e.goTo("/gps")&&o}return o},null,null)),(n()(),d._33(-1,null,["GPS"])),(n()(),d._33(-1,null,["\n"])),(n()(),d._33(-1,null,["\n"]))],null,null)}function _(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"app-home",[],null,null,null,a,C)),d._16(1,114688,null,0,b,[m.k],null,null)],function(n,l){n(l,1,0)},null)}function p(n){return d._35(0,[(n()(),d._18(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),d._16(1,212992,null,0,m.m,[m.b,d._1,d.l,[8,null],d.i],null,null),(n()(),d._33(-1,null,["\n"]))],function(n,l){n(l,1,0)},null)}function g(n){return d._35(0,[(n()(),d._18(0,0,null,null,1,"app-root",[],null,null,null,p,N)),d._16(1,49152,null,0,M,[],null,null)],null,null)}Object.defineProperty(l,"__esModule",{value:!0});var d=t("/oeL"),f={production:!0,GMAP_KEY:"AIzaSyC-A-cGUGzab7HNmN7GwP-BX4jNHYZgUGg"},h=t("a0oU"),m=t("BkNc"),b=function(){function n(n){this.router=n}return n.prototype.ngOnInit=function(){},n.prototype.goTo=function(n){this.router.navigateByUrl(n)},n.ctorParameters=function(){return[{type:m.k}]},n}(),v=t("AP4T"),k={"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location","errors.location.timeout":"Service timeout has been reached"},P=function(){function n(){}return n.prototype.getLocation=function(){return v.a.create(function(n){window.navigator&&window.navigator.geolocation?window.navigator.geolocation.watchPosition(function(l){console.log("service.watchLocation()",l),n.next(l)},function(l){switch(l.code){case 1:n.error(k["errors.location.permissionDenied"]);break;case 2:n.error(k["errors.location.positionUnavailable"]);break;case 3:n.error(k["errors.location.timeout"])}},{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3}):n.error(k["errors.location.unsupportedBrowser"])})},n.ctorParameters=function(){return[]},n}(),y=function(){function n(){}return n}(),S=(function(){function n(){}}(),function(){function n(n){this.gpsService=n,this.userGPS=new y,this.markers=[{lat:38.60834,lng:-90.2408,title:"Starbucks",radius:20,label:"A",visited:!1},{lat:38.61052,lng:-90.24927,title:"Our House",radius:20,label:"B",visited:!1}],this.visitedMarkers=[],this.timedPositions=[]}return n.prototype.ngOnInit=function(){var n=this;console.log("Init location-button.component"),this.gpsSubscription=this.gpsService.getLocation().subscribe(function(l){n.userGPS=l,console.log("GPS GET: ",n.userGPS),n.checkMarkerDistances(),n.recordPositionUpdate()}),this.getLocalStorage()},n.prototype.checkMarkerDistances=function(){console.log("Check marker distance");for(var n=new google.maps.LatLng({lat:this.userGPS.coords.latitude,lng:this.userGPS.coords.longitude}),l=0,t=this.markers;l<t.length;l++){var o=t[l],e=new google.maps.LatLng({lat:o.lat,lng:o.lng}),u=google.maps.geometry.spherical.computeDistanceBetween(n,e);u<o.radius&&!o.visited&&(this.visitedMarkers.push(o),console.log("add",this.visitedMarkers)),console.log("Marker:",o,u)}this.visitedMarkers&&(console.log("Handle visitedMarkers"),this.handleVisitedMarkers())},n.prototype.handleVisitedMarkers=function(){if(this.visitedMarkers){console.log("Handle visitedMarkers fxn");for(var n=0,l=this.visitedMarkers;n<l.length;n++){var t=l[n];console.log("Try posting marker to API"),console.log("If POST fails AND the marker is not already stored then store marker locally"),t.visited=!0}"undefined"!=typeof Storage?localStorage.setItem("storedVisitedMarkers",JSON.stringify(this.visitedMarkers)):window.alert("Sorry! The upload has failed and your device does not have Web Storage support."),this.getLocalStorage()}},n.prototype.getLocalStorage=function(){"undefined"!=typeof Storage?this.markerInLocalStorage=JSON.parse(localStorage.getItem("storedVisitedMarkers")):window.alert("Sorry! Your device does not have Web Storage support.")},n.prototype.recordPositionUpdate=function(){console.log("recordPositionUpdate()"),console.log(this.userGPS),this.timedPositions.push(this.userGPS),console.log(this.timedPositions.length)},n.prototype.ngOnDestroy=function(){this.gpsSubscription.unsubscribe()},n.ctorParameters=function(){return[{type:P}]},n}()),w=(h.a.forRoot({apiKey:f.GMAP_KEY}),function(){function n(){}return n}()),M=function(){function n(){this.title="app"}return n}(),G=["agm-map[_ngcontent-%COMP%]{height:300px}"],x=t("qbdv"),O=[G],I=d._15({encapsulation:0,styles:O,data:{}}),A=d._13("app-gps",S,s,{},{},[]),L=["#home-container[_ngcontent-%COMP%]{width:100vw;min-height:100vh}#home-container[_ngcontent-%COMP%], #home-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}#home-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:300px;height:50px;color:#fff;background-color:#ef8319;transition:all 1s ease}#home-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#4d4d4d}"],j=[L],C=d._15({encapsulation:0,styles:j,data:{}}),T=d._13("app-home",b,_,{},{},[]),B=["body[_ngcontent-%COMP%]{margin:0}"],Y=[B],N=d._15({encapsulation:0,styles:Y,data:{}}),U=d._13("app-root",M,g,{},{},[]),E=t("fc+i"),H=t("niyx"),D=t("wW3n"),F=t("wvx+"),z=t("q+Vp"),V=d._14(w,[M],function(n){return d._27([d._28(512,d.l,d._10,[[8,[A,T,U]],[3,d.l],d.F]),d._28(5120,d.B,d._26,[[3,d.B]]),d._28(4608,x.l,x.k,[d.B]),d._28(5120,d.c,d._19,[]),d._28(5120,d.z,d._24,[]),d._28(5120,d.A,d._25,[]),d._28(4608,E.b,E.s,[x.c]),d._28(6144,d.T,null,[E.b]),d._28(4608,E.e,E.f,[]),d._28(5120,E.c,function(n,l,t,o){return[new E.k(n),new E.o(l),new E.n(t,o)]},[x.c,x.c,x.c,E.e]),d._28(4608,E.d,E.d,[E.c,d.H]),d._28(135680,E.m,E.m,[x.c]),d._28(4608,E.l,E.l,[E.d,E.m]),d._28(6144,d.R,null,[E.l]),d._28(6144,E.p,null,[E.m]),d._28(4608,d.Z,d.Z,[d.H]),d._28(4608,E.g,E.g,[x.c]),d._28(4608,E.i,E.i,[x.c]),d._28(5120,m.a,m.v,[m.k]),d._28(4608,m.d,m.d,[]),d._28(6144,m.f,null,[m.d]),d._28(135680,m.n,m.n,[m.k,d.E,d.j,d.x,m.f]),d._28(4608,m.e,m.e,[]),d._28(5120,m.h,m.y,[m.w]),d._28(5120,d.b,function(n){return[n]},[m.h]),d._28(4608,H.c,H.c,[]),d._28(4608,H.b,H.b,[]),d._28(4608,D.a,F.b,[F.a,H.c,H.b]),d._28(4608,P,P,[]),d._28(512,x.b,x.b,[]),d._28(1024,d.p,E.q,[]),d._28(1024,d.G,function(){return[m.r()]},[]),d._28(512,m.w,m.w,[d.x]),d._28(1024,d.d,function(n,l,t){return[E.r(n,l),m.x(t)]},[[2,E.h],[2,d.G],m.w]),d._28(512,d.e,d.e,[[2,d.d]]),d._28(131584,d._17,d._17,[d.H,d._11,d.x,d.p,d.l,d.e]),d._28(2048,d.g,null,[d._17]),d._28(512,d.f,d.f,[d.g]),d._28(512,E.a,E.a,[[3,E.a]]),d._28(1024,m.q,m.t,[[3,m.k]]),d._28(512,m.p,m.c,[]),d._28(512,m.b,m.b,[]),d._28(256,m.g,{},[]),d._28(1024,x.h,m.s,[x.n,[2,x.a],m.g]),d._28(512,x.g,x.g,[x.h]),d._28(512,d.j,d.j,[]),d._28(512,d.E,d.W,[d.j,[2,d.X]]),d._28(1024,m.i,function(){return[[{path:"gps",component:S},{path:"home",component:b},{path:"",redirectTo:"/home",pathMatch:"full"}]]},[]),d._28(1024,m.k,m.u,[d.g,m.p,m.b,x.g,d.x,d.E,d.j,m.i,m.g,[2,m.o],[2,m.j]]),d._28(512,m.l,m.l,[[2,m.q],[2,m.k]]),d._28(512,z.a,z.a,[]),d._28(512,w,w,[]),d._28(256,F.a,{apiKey:"AIzaSyC-A-cGUGzab7HNmN7GwP-BX4jNHYZgUGg"},[])])});f.production&&Object(d._5)(),Object(E.j)().bootstrapModuleFactory(V).catch(function(n){return console.log(n)})},gFIY:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id="gFIY"}},[0]);